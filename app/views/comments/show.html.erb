<div class="title">A discussion thread</div>
<%- if @original_comment.user.nil? -%>
<div class="show">
  <div class="head_removed">[ removed ]</div>
  <div class="back"><%= link_to "Back to all the posts", root_path %></div>
</div>
<%- elsif @original_comment.user.id == session[:login] -%>
<%=   form_for :comment, url: @original_comment, method: :patch, html: {class: :show} do |f| %>
  <div class="head_title" data-title="<%= @original_comment.comment_threads.first.title %>">
    <span class="hide"><%= @original_comment.comment_threads.first.title %></span>
    <span class="head_rename">
<%=     fields_for :comment_thread do |t| %>
      <%= t.text_field :title %>
<%-     end -%>
    </span>
  </div>
  <div class="head_subhead">
    posted by <%= link_to @original_comment.user.handle, @original_comment.user %> - 
    <span class="action edit">don't edit</span> - 
    <span class="action remove">don't remove</span>
  </div>
  <div class="head_remove">
    <span>Are you <b>sure</b>?</span>
    <%= f.submit "Remove", class: :hide %>
  </div>
  <div class="head_body hide" data-body="<%= @original_comment.body %>">
    <%= markdown @original_comment.body %>
    <div class="timestamp"><%= @original_comment.created_at.to_formatted_s(:long) %></div>
  </div>
  <div class="head_body_edit"><%= f.text_area :body %></div>
  <%= f.submit "Update" %>
  <div class="back"><%= link_to "Back to all the posts", root_path %></div>
<%-   end -%>
<%- else -%>
<div class="show">
  <div class="head_title"><%= @original_comment.comment_threads.first.title %></div>
  <div class="head_subhead"><%= "posted by " + @original_comment.user.handle %></div>
  <div class="head_body">
    <%= markdown @original_comment.body %>
    <div class="timestamp"><%= @original_comment.created_at.to_formatted_s(:long) %></div>
  </div>
  <div class="back"><%= link_to "Back to all the posts", posts_path %></div>
</div>
<%- end -%>
<%= form_for :comment, url: comments_path, method: :create do |f| %>
<%=   fields_for :comment_thread do |t| %>
  <%= t.hidden_field :id, value: @original_comment.comment_threads.first.id %>
<%-   end -%>
  <%= f.hidden_field :body %>
<%=   render partial: "comments/thread", locals: {f: f} %>
<%- end -%>
